---
import Layout from '../layouts/Layout.astro';

const schema = {
  "@context": "https://schema.org",
  "@type": "ProfessionalService",
  "name": "Pythia Insights",
  "description": "Full Stack Finance ‚Äî from clean books to AI-native BI. We build the analytical infrastructure that spreadsheets can't.",
  "url": "https://pythiainsights.com",
  "serviceType": ["Fractional CFO", "FP&A Services", "Financial Modeling", "Business Intelligence", "Bookkeeping"],
  "areaServed": {
    "@type": "Country",
    "name": "United States"
  },
  "priceRange": "$$"
};
---

<Layout 
  title="Full Stack Finance | Pythia Insights" 
  description="Python operating models. AI-native BI. Machine learning drivers. We build the analytical infrastructure that spreadsheets can't."
  canonicalUrl="https://pythiainsights.com/"
  schema={schema}
>

<!-- Hero Section -->
<section class="hero">
  <div class="hero-grid-bg"></div>
  <div class="hero-glow"></div>

  <div class="hero-content">
    <div class="hero-tag">FULL STACK FINANCE CONSULTANCY</div>
    <h1>Financial intelligence,<br>built like <span class="accent-word">software.</span></h1>
    <p class="hero-desc">
      Python operating models. AI-native BI. Machine learning drivers.
      From clean books to board decks‚Äîthe entire stack, owned.
    </p>
    <div class="hero-actions">
      <a href="/contact" class="btn-primary">Schedule a Discovery Call</a>
      <a href="/stack" class="btn-ghost">See the Stack ‚Üí</a>
    </div>
  </div>

  <div class="hero-code">
    <div class="code-window">
      <div class="code-titlebar">
        <div class="code-dot"></div>
        <div class="code-dot"></div>
        <div class="code-dot"></div>
        <span class="code-filename">arr_forecast.py</span>
      </div>
      <div class="code-body">
        <span class="cm"># Bottoms-up ARR forecast with cohort logic</span><br>
        <span class="kw">import</span> pandas <span class="kw">as</span> pd<br>
        <span class="kw">from</span> pythia <span class="kw">import</span> <span class="fn">CohortEngine</span>, <span class="fn">ChurnModel</span><br><br>
        <span class="kw">class</span> <span class="fn">ARRForecast</span>:<br>
        &nbsp;&nbsp;<span class="kw">def</span> <span class="fn">__init__</span>(<span class="op">self</span>, contracts_df):<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="op">self</span>.cohorts = <span class="fn">CohortEngine</span>(contracts_df)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="op">self</span>.churn = <span class="fn">ChurnModel</span>()<br><br>
        &nbsp;&nbsp;<span class="kw">def</span> <span class="fn">forecast</span>(<span class="op">self</span>, months=<span class="num">12</span>):<br>
        &nbsp;&nbsp;&nbsp;&nbsp;base = <span class="op">self</span>.cohorts.<span class="fn">prorate_mrr</span>()<br>
        &nbsp;&nbsp;&nbsp;&nbsp;expansion = <span class="op">self</span>.<span class="fn">model_ndr</span>(base)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;churn_adj = <span class="op">self</span>.churn.<span class="fn">predict</span>(base)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">return</span> base + expansion - churn_adj<span class="code-cursor"></span>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- The Full Stack Visual -->
<section class="section" id="stack-viz">
  <div class="reveal">
    <div class="section-label">// The Full Stack</div>
    <div class="section-title">Own the entire financial stack.</div>
    <p class="section-desc">
      Most consultancies pick a lane. We integrated all three layers‚Äîbecause 
      insights without clean data are fiction, and data without intelligence is noise.
    </p>
  </div>

  <div class="stack-layers reveal">
    <div class="stack-layer intelligence">
      <div class="layer-badge">LAYER 03</div>
      <div class="layer-icon">‚óé</div>
      <h3>Intelligence</h3>
      <p>ML drivers, Python models, AI-native BI. Forecasts that learn.</p>
      <div class="layer-tools">
        <span>Python</span>
        <span>Evidence</span>
        <span>Claude API</span>
        <span>scikit-learn</span>
      </div>
    </div>
    <div class="stack-layer analysis">
      <div class="layer-badge">LAYER 02</div>
      <div class="layer-icon">‚üÅ</div>
      <h3>Analysis</h3>
      <p>FP&A, forecasting, scenario models. Strategic insight from clean data.</p>
      <div class="layer-tools">
        <span>dbt</span>
        <span>SQL</span>
        <span>Pandas</span>
        <span>DuckDB</span>
      </div>
    </div>
    <div class="stack-layer foundation">
      <div class="layer-badge">LAYER 01</div>
      <div class="layer-icon">‚äû</div>
      <h3>Foundation</h3>
      <p>Clean books, payroll, tax, compliance. The unglamorous work that makes everything else possible.</p>
      <div class="layer-tools">
        <span>QBO</span>
        <span>Gusto</span>
        <span>Bill.com</span>
        <span>Ramp</span>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- Pipeline Section -->
<section class="section" id="pipeline">
  <div class="reveal">
    <div class="section-label">// Data Pipeline</div>
    <div class="section-title">Messy data in, clean insight out.</div>
    <p class="section-desc">
      Every stage version-controlled, tested, and reproducible.
      No broken spreadsheets. No manual refresh.
    </p>
  </div>

  <div class="pipeline reveal">
    <div class="pipeline-stage">
      <div class="stage-icon">‚äû</div>
      <div class="stage-name">01 ‚Äî INGEST</div>
      <div class="stage-title">Source Systems</div>
      <p>Extract from QuickBooks, CRMs, payroll systems, and banks via automated connectors.</p>
      <div class="stage-tools">
        <span class="tool-tag">QuickBooks</span>
        <span class="tool-tag">Stripe</span>
        <span class="tool-tag">REST APIs</span>
      </div>
    </div>
    <div class="pipeline-stage">
      <div class="stage-icon">‚üÅ</div>
      <div class="stage-name">02 ‚Äî TRANSFORM</div>
      <div class="stage-title">Python Models</div>
      <p>Bottoms-up operating models with proration logic, cohort analysis, and scenario engines.</p>
      <div class="stage-tools">
        <span class="tool-tag">Python</span>
        <span class="tool-tag">Pandas</span>
        <span class="tool-tag">dbt</span>
      </div>
    </div>
    <div class="pipeline-stage">
      <div class="stage-icon">‚óé</div>
      <div class="stage-name">03 ‚Äî ENRICH</div>
      <div class="stage-title">ML Drivers</div>
      <p>Churn prediction, revenue driver analysis, and anomaly detection on financial data.</p>
      <div class="stage-tools">
        <span class="tool-tag">scikit-learn</span>
        <span class="tool-tag">XGBoost</span>
        <span class="tool-tag">Claude API</span>
      </div>
    </div>
    <div class="pipeline-stage">
      <div class="stage-icon">‚óß</div>
      <div class="stage-name">04 ‚Äî DELIVER</div>
      <div class="stage-title">AI-Native BI</div>
      <p>Code-based dashboards that version control like software and update with every commit.</p>
      <div class="stage-tools">
        <span class="tool-tag">Evidence</span>
        <span class="tool-tag">Rill</span>
        <span class="tool-tag">Streamlit</span>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- Terminal Services Block -->
<section class="section" id="services">
  <div class="reveal">
    <div class="section-label">// Services</div>
    <div class="section-title">The full offering.</div>
    <p class="section-desc">
      A one-person consultancy that delivers like an in-house team.
      Flexible engagement, full-stack capability.
    </p>
  </div>

  <div class="terminal-block reveal">
    <div class="terminal-header">
      <div class="terminal-dots">
        <span></span><span></span><span></span>
      </div>
      <span class="terminal-title">pythia --services</span>
    </div>
    <div class="terminal-body">
      <div class="service-line">
        <span class="prompt">$</span>
        <span class="cmd">pythia list --category=foundation</span>
      </div>
      <div class="service-output">
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Bookkeeping</strong> ‚Äî Monthly close, reconciliation, clean books that scale</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Payroll</strong> ‚Äî Processing, compliance, state registrations</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Tax Prep</strong> ‚Äî Coordination with your CPA, estimated payments, 1099s</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>AP/AR</strong> ‚Äî Bill pay, invoicing, collections, cash management</div>
      </div>
      <div class="service-line">
        <span class="prompt">$</span>
        <span class="cmd">pythia list --category=analysis</span>
      </div>
      <div class="service-output">
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>FP&A</strong> ‚Äî Budgeting, forecasting, variance analysis</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Scenario Modeling</strong> ‚Äî What-if analysis, sensitivity testing</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Board Decks</strong> ‚Äî Investor-ready financials and KPI packages</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Due Diligence</strong> ‚Äî M&A support, data room prep, QofE assist</div>
      </div>
      <div class="service-line">
        <span class="prompt">$</span>
        <span class="cmd">pythia list --category=intelligence</span>
      </div>
      <div class="service-output">
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Custom Dashboards</strong> ‚Äî Evidence/Rill BI, real-time metrics</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Python Models</strong> ‚Äî ARR waterfalls, cohort analysis, revenue drivers</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>ML Forecasting</strong> ‚Äî Churn prediction, demand forecasting</div>
        <div class="service-item"><span class="bullet">‚ñ∏</span> <strong>Automation</strong> ‚Äî Report generation, data pipelines, integrations</div>
      </div>
      <div class="service-line">
        <span class="prompt">$</span>
        <span class="cmd typing">_</span>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- Comparison Section -->
<section class="section" id="approach">
  <div class="reveal">
    <div class="section-label">// Why This Is Different</div>
    <div class="section-title">Traditional vs. Pythia</div>
    <p class="section-desc">
      Most finance consultancies hand you a spreadsheet and a slide deck.
      We deliver production-grade infrastructure.
    </p>
  </div>

  <div class="comparison-grid reveal">
    <div class="comparison-column traditional">
      <div class="column-header">
        <span class="column-icon">üìä</span>
        <h3>Traditional Approach</h3>
      </div>
      <ul class="comparison-list">
        <li><span class="x">‚úï</span> Excel models with broken formulas</li>
        <li><span class="x">‚úï</span> Static reports that age instantly</li>
        <li><span class="x">‚úï</span> Manual data refresh every month</li>
        <li><span class="x">‚úï</span> "Trust me" variance explanations</li>
        <li><span class="x">‚úï</span> Consultant-dependent knowledge</li>
        <li><span class="x">‚úï</span> Separate vendors for books vs BI</li>
      </ul>
    </div>
    <div class="comparison-column pythia">
      <div class="column-header">
        <span class="column-icon">‚ö°</span>
        <h3>Pythia Approach</h3>
      </div>
      <ul class="comparison-list">
        <li><span class="check">‚úì</span> Python models, version-controlled</li>
        <li><span class="check">‚úì</span> Live dashboards that auto-refresh</li>
        <li><span class="check">‚úì</span> Automated data pipelines</li>
        <li><span class="check">‚úì</span> Traceable, auditable transformations</li>
        <li><span class="check">‚úì</span> Documented infrastructure you own</li>
        <li><span class="check">‚úì</span> Full stack from one consultant</li>
      </ul>
    </div>
  </div>

  <div class="diff-cards reveal">
    <div class="diff-card">
      <div class="diff-number">01</div>
      <h3>Code > Spreadsheets</h3>
      <p>Operating models built in Python, not Excel. Version-controlled, testable, auditable. No broken formulas, no hidden tabs.</p>
    </div>
    <div class="diff-card">
      <div class="diff-number">02</div>
      <h3>AI-Augmented Analysis</h3>
      <p>LLMs integrated directly into workflows‚Äîautomated variance commentary, intelligent data quality checks, natural language querying.</p>
    </div>
    <div class="diff-card">
      <div class="diff-number">03</div>
      <h3>Real-Time BI</h3>
      <p>Dashboards built as code with Evidence and Rill. They deploy like software, refresh automatically, and scale without manual work.</p>
    </div>
    <div class="diff-card">
      <div class="diff-number">04</div>
      <h3>Finance-Native</h3>
      <p>Built by someone who's lived in FP&A‚ÄîARR waterfalls, commission plans, board decks, due diligence. The tech serves the finance.</p>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- Interactive Demo Section -->
<section class="section" id="demo">
  <div class="reveal">
    <div class="section-label">// Interactive</div>
    <div class="section-title">See it work.</div>
    <p class="section-desc">
      A sample ARR scenario model. Adjust the inputs and watch the
      outputs recalculate in real time.
    </p>
  </div>

  <div class="demo-container reveal">
    <div class="demo-header">
      <div class="demo-tabs">
        <button class="demo-tab active">Scenario Model</button>
        <button class="demo-tab">Cohort View</button>
        <button class="demo-tab">Drivers</button>
      </div>
      <div class="demo-status">
        <div class="status-dot"></div>
        LIVE
      </div>
    </div>
    <div class="demo-body">
      <div class="demo-controls">
        <div class="control-group">
          <label>Starting ARR ($M)</label>
          <div class="slider-value" id="arr-val">$12.0M</div>
          <div class="slider-container">
            <input type="range" id="arr-slider" min="5" max="30" value="12" step="0.5">
          </div>
        </div>
        <div class="control-group">
          <label>Net Dollar Retention (%)</label>
          <div class="slider-value" id="ndr-val">112%</div>
          <div class="slider-container">
            <input type="range" id="ndr-slider" min="80" max="140" value="112" step="1">
          </div>
        </div>
        <div class="control-group">
          <label>New Business Growth (%)</label>
          <div class="slider-value" id="growth-val">25%</div>
          <div class="slider-container">
            <input type="range" id="growth-slider" min="0" max="60" value="25" step="1">
          </div>
        </div>
        <div class="control-group">
          <label>Gross Churn Rate (%)</label>
          <div class="slider-value" id="churn-val">8%</div>
          <div class="slider-container">
            <input type="range" id="churn-slider" min="2" max="25" value="8" step="0.5">
          </div>
        </div>
      </div>
      <div class="demo-output">
        <div class="output-label">12-MONTH PROJECTION</div>
        <div class="metric-row">
          <span class="metric-label">Ending ARR</span>
          <span class="metric-value metric-positive" id="ending-arr">$15.5M</span>
        </div>
        <div class="metric-row">
          <span class="metric-label">Net New ARR</span>
          <span class="metric-value metric-positive" id="net-new">+$3.5M</span>
        </div>
        <div class="metric-row">
          <span class="metric-label">Expansion Revenue</span>
          <span class="metric-value metric-positive" id="expansion">+$1.4M</span>
        </div>
        <div class="metric-row">
          <span class="metric-label">Churned ARR</span>
          <span class="metric-value metric-negative" id="churned">-$1.0M</span>
        </div>
        <div class="metric-row">
          <span class="metric-label">Implied ARR Growth</span>
          <span class="metric-value" id="arr-growth" style="color: var(--accent);">29.2%</span>
        </div>
        <div class="rule40-box">
          <div class="rule40-label">RULE OF 40</div>
          <div class="rule40-value" id="rule-40">37.2</div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- CTA Section -->
<section class="cta-section" id="contact">
  <div class="cta-glow"></div>
  <h2>Ready to upgrade your<br>financial infrastructure?</h2>
  <p>Let's talk about what code-native finance can do for your business.</p>
  <a href="/contact" class="btn-primary">Schedule a Discovery Call</a>
</section>

</Layout>

<style>
  /* Hero */
  .hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    padding: 8rem 3rem 4rem;
    position: relative;
    overflow: hidden;
  }

  .hero-grid-bg {
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(rgba(30, 30, 42, 0.3) 1px, transparent 1px),
      linear-gradient(90deg, rgba(30, 30, 42, 0.3) 1px, transparent 1px);
    background-size: 60px 60px;
    mask-image: radial-gradient(ellipse 70% 60% at 50% 40%, black 20%, transparent 70%);
  }

  .hero-glow {
    position: absolute;
    width: 600px;
    height: 600px;
    border-radius: 50%;
    background: radial-gradient(circle, var(--accent-glow), transparent 70%);
    top: 10%;
    right: 15%;
    filter: blur(80px);
    animation: glow-drift 8s ease-in-out infinite alternate;
  }

  .hero-content {
    max-width: 720px;
    position: relative;
    z-index: 2;
  }

  .hero-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    color: var(--accent);
    letter-spacing: 0.08em;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    opacity: 0;
    animation: fade-up 0.8s ease forwards 0.2s;
  }

  .hero-tag::before {
    content: '';
    width: 32px;
    height: 1px;
    background: var(--accent);
  }

  .hero h1 {
    font-size: clamp(2.8rem, 5.5vw, 4.2rem);
    font-weight: 800;
    line-height: 1.08;
    letter-spacing: -0.03em;
    margin-bottom: 1.5rem;
    opacity: 0;
    animation: fade-up 0.8s ease forwards 0.4s;
  }

  .hero h1 .accent-word {
    color: var(--accent);
    position: relative;
  }

  .hero-desc {
    font-size: 1.15rem;
    color: var(--text-muted);
    max-width: 540px;
    line-height: 1.7;
    margin-bottom: 2.5rem;
    opacity: 0;
    animation: fade-up 0.8s ease forwards 0.6s;
  }

  .hero-actions {
    display: flex;
    gap: 1rem;
    opacity: 0;
    animation: fade-up 0.8s ease forwards 0.8s;
  }

  /* Hero code block */
  .hero-code {
    position: absolute;
    right: 3rem;
    top: 50%;
    transform: translateY(-50%);
    width: 440px;
    z-index: 2;
    opacity: 0;
    animation: fade-left 1s ease forwards 1s;
  }

  .code-window {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  }

  .code-titlebar {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 12px 16px;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
  }

  .code-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--border-accent);
  }

  .code-dot:nth-child(1) { background: var(--rose); opacity: 0.7; }
  .code-dot:nth-child(2) { background: var(--amber); opacity: 0.7; }
  .code-dot:nth-child(3) { background: var(--accent); opacity: 0.7; }

  .code-filename {
    margin-left: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--text-dim);
  }

  .code-body {
    padding: 1.25rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    line-height: 1.8;
    overflow: hidden;
  }

  .code-body .kw { color: var(--violet); }
  .code-body .fn { color: #60a5fa; }
  .code-body .str { color: var(--accent); }
  .code-body .cm { color: var(--text-dim); font-style: italic; }
  .code-body .num { color: var(--amber); }
  .code-body .op { color: var(--text-muted); }

  .code-cursor {
    display: inline-block;
    width: 2px;
    height: 14px;
    background: var(--accent);
    animation: blink 1s step-end infinite;
    vertical-align: middle;
    margin-left: 2px;
  }

  /* Stack Layers Visual */
  .stack-layers {
    display: flex;
    flex-direction: column;
    gap: 0;
    max-width: 900px;
    margin: 0 auto;
  }

  .stack-layer {
    padding: 2.5rem;
    border: 1px solid var(--border);
    position: relative;
    transition: all 0.4s;
  }

  .stack-layer:first-child { border-radius: 12px 12px 0 0; }
  .stack-layer:last-child { border-radius: 0 0 12px 12px; }
  .stack-layer:not(:last-child) { border-bottom: none; }

  .stack-layer.intelligence { background: linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, var(--bg-elevated) 50%); }
  .stack-layer.analysis { background: linear-gradient(135deg, rgba(34, 211, 238, 0.08) 0%, var(--bg-elevated) 50%); }
  .stack-layer.foundation { background: linear-gradient(135deg, rgba(0, 229, 160, 0.08) 0%, var(--bg-elevated) 50%); }

  .stack-layer:hover {
    z-index: 2;
    box-shadow: 0 0 40px var(--accent-dim);
  }

  .layer-badge {
    position: absolute;
    top: 1rem;
    right: 1.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--text-dim);
    letter-spacing: 0.1em;
  }

  .layer-icon {
    font-size: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--accent);
  }

  .stack-layer.intelligence .layer-icon { color: var(--violet); }
  .stack-layer.analysis .layer-icon { color: var(--cyan); }
  .stack-layer.foundation .layer-icon { color: var(--accent); }

  .stack-layer h3 {
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
  }

  .stack-layer p {
    color: var(--text-muted);
    font-size: 0.95rem;
    max-width: 500px;
    margin-bottom: 1rem;
  }

  .layer-tools {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .layer-tools span {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    padding: 0.35rem 0.7rem;
    background: var(--accent-dim);
    border: 1px solid rgba(0, 229, 160, 0.15);
    border-radius: 4px;
    color: var(--accent);
  }

  .stack-layer.intelligence .layer-tools span {
    background: rgba(139, 92, 246, 0.08);
    border-color: rgba(139, 92, 246, 0.15);
    color: var(--violet);
  }

  .stack-layer.analysis .layer-tools span {
    background: rgba(34, 211, 238, 0.08);
    border-color: rgba(34, 211, 238, 0.15);
    color: var(--cyan);
  }

  /* Pipeline */
  .pipeline {
    display: flex;
    align-items: stretch;
    gap: 0;
    margin: 0 auto;
    max-width: 1100px;
    position: relative;
  }

  .pipeline-stage {
    flex: 1;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    padding: 2rem 1.5rem;
    position: relative;
    transition: all 0.4s;
  }

  .pipeline-stage:first-child { border-radius: 12px 0 0 12px; }
  .pipeline-stage:last-child { border-radius: 0 12px 12px 0; }

  .pipeline-stage:hover {
    background: var(--bg-card);
    border-color: var(--accent);
    z-index: 2;
    box-shadow: 0 0 40px var(--accent-dim);
  }

  .pipeline-stage::after {
    content: '‚Üí';
    position: absolute;
    right: -8px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-dim);
    font-size: 1.2rem;
    z-index: 3;
  }

  .pipeline-stage:last-child::after { display: none; }

  .stage-icon {
    font-size: 1.4rem;
    margin-bottom: 1rem;
  }

  .stage-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--accent);
    letter-spacing: 0.04em;
    margin-bottom: 0.5rem;
  }

  .stage-title {
    font-weight: 600;
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }

  .pipeline-stage p {
    color: var(--text-muted);
    font-size: 0.82rem;
    line-height: 1.6;
    margin-top: 0.5rem;
  }

  .stage-tools {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-top: 1rem;
  }

  .tool-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    padding: 0.3rem 0.6rem;
    background: var(--accent-dim);
    border: 1px solid rgba(0, 229, 160, 0.15);
    border-radius: 4px;
    color: var(--accent);
    letter-spacing: 0.02em;
  }

  /* Terminal Services Block */
  .terminal-block {
    max-width: 900px;
    margin: 0 auto;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0,0,0,0.4);
  }

  .terminal-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 18px;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
  }

  .terminal-dots {
    display: flex;
    gap: 6px;
  }

  .terminal-dots span {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }

  .terminal-dots span:nth-child(1) { background: var(--rose); opacity: 0.7; }
  .terminal-dots span:nth-child(2) { background: var(--amber); opacity: 0.7; }
  .terminal-dots span:nth-child(3) { background: var(--accent); opacity: 0.7; }

  .terminal-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--text-dim);
  }

  .terminal-body {
    padding: 1.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    line-height: 1.8;
  }

  .service-line {
    margin-bottom: 0.75rem;
  }

  .prompt { color: var(--accent); margin-right: 8px; }
  .cmd { color: var(--text); }
  .typing { animation: blink 1s step-end infinite; }

  .service-output {
    margin-left: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .service-item {
    color: var(--text-muted);
    margin-bottom: 0.4rem;
  }

  .service-item strong { color: var(--text); font-weight: 500; }
  .bullet { color: var(--cyan); margin-right: 8px; }

  /* Comparison Section */
  .comparison-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    max-width: 900px;
    margin: 0 auto 4rem;
  }

  .comparison-column {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 2rem;
    transition: all 0.4s;
  }

  .comparison-column.pythia {
    border-color: var(--accent);
    box-shadow: 0 0 30px var(--accent-dim);
  }

  .column-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
  }

  .column-icon {
    font-size: 1.5rem;
  }

  .column-header h3 {
    font-size: 1rem;
    font-weight: 600;
  }

  .comparison-list {
    list-style: none;
  }

  .comparison-list li {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    font-size: 0.9rem;
    color: var(--text-muted);
  }

  .x { color: var(--rose); font-weight: 600; flex-shrink: 0; }
  .check { color: var(--accent); font-weight: 600; flex-shrink: 0; }

  /* Diff Cards */
  .diff-cards {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
    max-width: 1100px;
    margin: 0 auto;
  }

  .diff-card {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 2rem;
    transition: all 0.4s;
    position: relative;
    overflow: hidden;
  }

  .diff-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--accent), transparent);
    opacity: 0;
    transition: opacity 0.4s;
  }

  .diff-card:hover {
    border-color: var(--border-accent);
    transform: translateY(-3px);
    box-shadow: 0 16px 48px rgba(0,0,0,0.3);
  }

  .diff-card:hover::before { opacity: 1; }

  .diff-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    color: var(--text-dim);
    margin-bottom: 1rem;
  }

  .diff-card h3 {
    font-size: 1.05rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    letter-spacing: -0.01em;
  }

  .diff-card p {
    color: var(--text-muted);
    font-size: 0.85rem;
    line-height: 1.65;
  }

  /* Demo Section */
  .demo-container {
    max-width: 900px;
    margin: 0 auto;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 24px 80px rgba(0,0,0,0.4);
  }

  .demo-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.5rem;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
  }

  .demo-tabs {
    display: flex;
    gap: 0;
  }

  .demo-tab {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    padding: 0.5rem 1.25rem;
    color: var(--text-dim);
    cursor: pointer;
    border: 1px solid transparent;
    background: none;
    transition: all 0.3s;
    border-radius: 6px;
  }

  .demo-tab.active {
    color: var(--accent);
    background: var(--accent-dim);
    border-color: rgba(0, 229, 160, 0.15);
  }

  .demo-tab:hover:not(.active) { color: var(--text-muted); }

  .demo-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    color: var(--accent);
  }

  .status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--accent);
    animation: pulse-dot 2s ease infinite;
  }

  .demo-body {
    display: grid;
    grid-template-columns: 1fr 1fr;
    min-height: 380px;
  }

  .demo-controls {
    padding: 2rem;
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .control-group label {
    display: block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    color: var(--text-dim);
    letter-spacing: 0.06em;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }

  .slider-container input[type="range"] {
    -webkit-appearance: none;
    width: 100%;
    height: 4px;
    background: var(--border-accent);
    border-radius: 2px;
    outline: none;
  }

  .slider-container input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 12px var(--accent-glow);
  }

  .slider-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 0.25rem;
  }

  .demo-output {
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .output-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    color: var(--text-dim);
    margin-bottom: 0.25rem;
  }

  .metric-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.85rem 1rem;
    background: var(--bg-card);
    border-radius: 8px;
    border: 1px solid var(--border);
  }

  .metric-label {
    font-size: 0.8rem;
    color: var(--text-muted);
  }

  .metric-value {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    font-size: 0.95rem;
  }

  .metric-positive { color: var(--accent); }
  .metric-negative { color: var(--rose); }

  .rule40-box {
    margin-top: auto;
    padding: 0.75rem 1rem;
    background: var(--accent-dim);
    border-radius: 8px;
    border: 1px solid rgba(0,229,160,0.12);
  }

  .rule40-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--accent);
    letter-spacing: 0.08em;
    margin-bottom: 0.25rem;
  }

  .rule40-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.3rem;
    font-weight: 600;
  }

  /* CTA Section */
  .cta-section {
    text-align: center;
    padding: 8rem 3rem;
    position: relative;
  }

  .cta-glow {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 500px;
    height: 500px;
    background: radial-gradient(circle, var(--accent-glow), transparent 70%);
    filter: blur(100px);
    opacity: 0.5;
    pointer-events: none;
  }

  .cta-section h2 {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    letter-spacing: -0.02em;
    margin-bottom: 1rem;
    position: relative;
  }

  .cta-section p {
    color: var(--text-muted);
    font-size: 1.1rem;
    margin-bottom: 2.5rem;
    position: relative;
  }

  .cta-section .btn-primary { position: relative; }

  /* Responsive */
  @media (max-width: 1024px) {
    .hero-code { display: none; }
    .hero-content { max-width: 100%; }
    .pipeline { flex-direction: column; }
    .pipeline-stage { border-radius: 0 !important; }
    .pipeline-stage:first-child { border-radius: 12px 12px 0 0 !important; }
    .pipeline-stage:last-child { border-radius: 0 0 12px 12px !important; }
    .pipeline-stage::after { display: none; }
    .comparison-grid { grid-template-columns: 1fr; }
    .diff-cards { grid-template-columns: repeat(2, 1fr); }
    .demo-body { grid-template-columns: 1fr; }
    .demo-controls { border-right: none; border-bottom: 1px solid var(--border); }
  }

  @media (max-width: 768px) {
    .hero { padding: 140px 1.5rem 80px; }
    .hero-actions { flex-direction: column; }
    .diff-cards { grid-template-columns: 1fr; }
    .stack-layer { padding: 2rem 1.5rem; }
    .layer-badge { display: none; }
    .cta-section { padding: 4rem 1.5rem; }
  }
</style>

<script>
  // Interactive ARR model
  const arrSlider = document.getElementById('arr-slider') as HTMLInputElement;
  const ndrSlider = document.getElementById('ndr-slider') as HTMLInputElement;
  const growthSlider = document.getElementById('growth-slider') as HTMLInputElement;
  const churnSlider = document.getElementById('churn-slider') as HTMLInputElement;

  function fmt(n: number): string {
    return n >= 10 ? `$${n.toFixed(1)}M` : `$${n.toFixed(2)}M`;
  }

  function updateModel() {
    if (!arrSlider || !ndrSlider || !growthSlider || !churnSlider) return;
    
    const arr = parseFloat(arrSlider.value);
    const ndr = parseFloat(ndrSlider.value) / 100;
    const growth = parseFloat(growthSlider.value) / 100;
    const churn = parseFloat(churnSlider.value) / 100;

    document.getElementById('arr-val')!.textContent = fmt(arr);
    document.getElementById('ndr-val')!.textContent = `${(ndr * 100).toFixed(0)}%`;
    document.getElementById('growth-val')!.textContent = `${(growth * 100).toFixed(0)}%`;
    document.getElementById('churn-val')!.textContent = `${(churn * 100).toFixed(0)}%`;

    const expansionRate = ndr - 1 + churn;
    const expansion = arr * Math.max(0, expansionRate);
    const churned = arr * churn;
    const newBiz = arr * growth;
    const ending = arr + newBiz + expansion - churned;
    const netNew = ending - arr;
    const arrGrowth = (netNew / arr) * 100;
    const rule40 = arrGrowth + 8;

    document.getElementById('ending-arr')!.textContent = fmt(ending);
    document.getElementById('net-new')!.textContent = `+${fmt(netNew)}`;
    document.getElementById('expansion')!.textContent = `+${fmt(expansion)}`;
    document.getElementById('churned')!.textContent = `-${fmt(churned)}`;

    const growthEl = document.getElementById('arr-growth')!;
    growthEl.textContent = `${arrGrowth.toFixed(1)}%`;
    growthEl.style.color = arrGrowth >= 0 ? 'var(--accent)' : 'var(--rose)';

    const rule40El = document.getElementById('rule-40')!;
    rule40El.textContent = rule40.toFixed(1);
    rule40El.style.color = rule40 >= 40 ? 'var(--accent)' : rule40 >= 30 ? 'var(--amber)' : 'var(--rose)';
  }

  arrSlider?.addEventListener('input', updateModel);
  ndrSlider?.addEventListener('input', updateModel);
  growthSlider?.addEventListener('input', updateModel);
  churnSlider?.addEventListener('input', updateModel);

  updateModel();
</script>
